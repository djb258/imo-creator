# ═══════════════════════════════════════════════════════════════════════════════
# SNAP-ON TOOLBOX - MASTER REGISTRY
# ═══════════════════════════════════════════════════════════════════════════════
# Authority: imo-creator (Constitutional)
# Status: LOCKED - Claude Code MUST read before suggesting any tool
# Location: imo-creator/templates/SNAP_ON_TOOLBOX.yaml
# ═══════════════════════════════════════════════════════════════════════════════

version: "1.0.0"
last_updated: "2026-01-07"
doctrine: "Snap-on - One tool, many jobs, config is the variable"

# ═══════════════════════════════════════════════════════════════════════════════
# EVALUATION CRITERIA
# ═══════════════════════════════════════════════════════════════════════════════
criteria:
  tier_0_free:
    definition: "Claude Code, existing infra, stdlib, free APIs"
    cost: "$0"
    priority: "Build first"

  tier_1_cheap:
    definition: "< $0.01/call or fixed subscription already owned"
    cost: "Minimal"
    priority: "Use freely within limits"

  tier_2_surgical:
    definition: "Per-call cost, gated by business rules"
    cost: "Pay-per-use"
    priority: "Fire only when criteria met"

# ═══════════════════════════════════════════════════════════════════════════════
# TIER 0: FREE TOOLS (12 tools)
# ═══════════════════════════════════════════════════════════════════════════════

tools:

  CensusHarvester:
    tool_id: "TOOL-001"
    tier: 0
    status: "active"
    software:
      primary: "Census API"
      dependencies: ["httpx>=0.25"]
      vendor: null
      requires_api_key: true
      api_key_source: "CENSUS_API_KEY"
    purpose:
      summary: "Fetches demographics, housing, permits from Census Bureau"
      what_it_does:
        - "ACS 5-Year demographic data by ZIP/county"
        - "Building permits survey data"
        - "Population, income, poverty, renter rates"
      consumers:
        - "storage-facility-build: Layer 2 Demographics"
        - "barton-outreach: Market sizing"
    throttle:
      rate_limits:
        - {scope: "per_minute", limit: 50}
        - {scope: "per_day", limit: 500}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "exponential", initial_delay_ms: 1000, max_retries: 3}
    guardrails:
      kill_switch: {trigger: "error_rate > 50% in 5 minutes", action: "halt_and_alert"}
      data_quality: {staleness_threshold_hours: 720}
    accuracy: "100%"
    accuracy_notes: "Government source of truth"

  DOLHarvester:
    tool_id: "TOOL-002"
    tier: 0
    status: "active"
    software:
      primary: "DOL EFAST API / Bulk CSV"
      dependencies: ["httpx>=0.25", "pandas>=2.0"]
      vendor: null
      requires_api_key: false
    purpose:
      summary: "Harvests Form 5500 data, EINs, plan details from DOL"
      what_it_does:
        - "Bulk download Form 5500 filings"
        - "Extract Schedule A renewal dates"
        - "Map EIN to company identity"
      consumers:
        - "barton-outreach: DOL Filings sub-hub"
    throttle:
      rate_limits:
        - {scope: "per_day", limit: 10}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "fixed", initial_delay_ms: 5000, max_retries: 2}
    guardrails:
      kill_switch: {trigger: "download_failure", action: "halt_and_alert"}
    accuracy: "100%"
    accuracy_notes: "Government source of truth"

  TrendSignal:
    tool_id: "TOOL-003"
    tier: 0
    status: "active"
    software:
      primary: "pytrends (Google Trends unofficial)"
      dependencies: ["pytrends>=4.9", "httpx>=0.25"]
      vendor: "Google Trends"
      requires_api_key: false
    purpose:
      summary: "Monitors search trend signals for keywords by geography"
      what_it_does:
        - "Interest over time for keyword sets"
        - "Regional interest breakdown"
        - "Rising/declining trend detection"
      consumers:
        - "storage-facility-build: PASS0 TrendSignal spoke"
        - "barton-outreach: Blog Content timing signals"
    throttle:
      rate_limits:
        - {scope: "per_day", limit: 100}
        - {scope: "per_request", limit: 1, window: "3s"}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "exponential", initial_delay_ms: 3000, max_retries: 3}
    guardrails:
      kill_switch: {trigger: "429_rate_limit", action: "circuit_break_24h"}
    accuracy: "85%"
    accuracy_notes: "Relative index, not absolute volume"

  MXLookup:
    tool_id: "TOOL-004"
    tier: 0
    status: "active"
    software:
      primary: "dnspython"
      dependencies: ["dnspython>=2.4"]
      vendor: null
      requires_api_key: false
    purpose:
      summary: "Validates domain has functioning mail server"
      what_it_does:
        - "DNS MX record lookup"
        - "Mail server existence validation"
      consumers:
        - "barton-outreach: Company Target - Gate Zero"
    throttle:
      rate_limits:
        - {scope: "per_second", limit: 50}
        - {scope: "per_day", limit: 50000}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "linear", initial_delay_ms: 100, max_retries: 2}
    guardrails:
      kill_switch: {trigger: "dns_resolver_failure", action: "switch_resolver"}
      data_quality: {cache_ttl_hours: 24}
    accuracy: "100%"
    accuracy_notes: "Binary - MX exists or not"

  SMTPCheck:
    tool_id: "TOOL-005"
    tier: 0
    status: "active"
    software:
      primary: "smtplib (stdlib)"
      dependencies: []
      vendor: null
      requires_api_key: false
    purpose:
      summary: "Validates email deliverability via SMTP handshake"
      what_it_does:
        - "SMTP connection test"
        - "RCPT TO validation (where allowed)"
        - "Catch-all detection"
      consumers:
        - "barton-outreach: Company Target - email validation"
    throttle:
      rate_limits:
        - {scope: "per_domain", limit: 1, window: "2s"}
        - {scope: "per_day", limit: 10000}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "exponential", initial_delay_ms: 2000, max_retries: 2}
    guardrails:
      kill_switch: {trigger: "ip_blacklist_detected", action: "halt_and_alert"}
      data_quality: {cache_ttl_hours: 168}
    accuracy: "95%"
    accuracy_notes: "Some servers reject all RCPT TO probes"

  LinkedInCheck:
    tool_id: "TOOL-006"
    tier: 0
    status: "active"
    software:
      primary: "httpx"
      dependencies: ["httpx>=0.25"]
      vendor: null
      requires_api_key: false
    purpose:
      summary: "Validates LinkedIn company/profile URL exists"
      what_it_does:
        - "HTTP HEAD request to LinkedIn URL"
        - "200 vs 404 validation"
      what_it_does_NOT_do:
        - "Scrape LinkedIn content (ToS violation)"
      consumers:
        - "barton-outreach: Company Target - LinkedIn validation"
    throttle:
      rate_limits:
        - {scope: "per_minute", limit: 30}
        - {scope: "per_day", limit: 1000}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "exponential", initial_delay_ms: 2000, max_retries: 2}
    guardrails:
      kill_switch: {trigger: "403_or_429_sustained", action: "circuit_break_1h"}
      data_quality: {cache_ttl_hours: 168}
    accuracy: "90%"
    accuracy_notes: "URL exists != person still there"

  EINMatcher:
    tool_id: "TOOL-007"
    tier: 0
    status: "active"
    software:
      primary: "pg_trgm + rapidfuzz"
      dependencies: ["rapidfuzz>=3.0", "psycopg2>=2.9"]
      vendor: null
      requires_api_key: false
    purpose:
      summary: "Fuzzy matches company names to EIN records"
      what_it_does:
        - "Trigram similarity matching (>0.8 threshold)"
        - "State → City → Name cascade"
        - "DBA/trade name resolution"
      consumers:
        - "barton-outreach: DOL Filings - entity resolution"
    throttle:
      rate_limits:
        - {scope: "per_second", limit: 100}
        - {scope: "per_batch", limit: 10000}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "none", max_retries: 1}
    guardrails:
      kill_switch: {trigger: "db_connection_failure", action: "halt_and_alert"}
      data_quality: {min_similarity_threshold: 0.8, require_state_match: true}
    accuracy: "85-95%"
    accuracy_notes: "Depends on name cleanliness"

  TitleClassifier:
    tool_id: "TOOL-008"
    tier: 0
    status: "active"
    software:
      primary: "Rules engine + Claude (tail)"
      dependencies: ["pyyaml>=6.0"]
      vendor: "Claude (free via Claude Code)"
      requires_api_key: false
    purpose:
      summary: "Maps raw title text to slot (CEO, CFO, HR, Ops)"
      what_it_does:
        - "Pattern matching against title rules"
        - "Slot assignment (CEO/CFO/HR/Ops)"
        - "LLM fallback for ambiguous titles"
      consumers:
        - "barton-outreach: People Intelligence - slot resolver"
    throttle:
      rate_limits:
        - {scope: "per_second", limit: 100}
        - {scope: "llm_fallback_per_day", limit: 100}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "none", max_retries: 1}
    guardrails:
      kill_switch: {trigger: "llm_fallback_rate > 30%", action: "alert_review_rules"}
      data_quality: {require_confidence: 0.7}
    accuracy: "95%"
    accuracy_notes: "Rules handle 85%, LLM handles edge cases"

  NewsRadar:
    tool_id: "TOOL-009"
    tier: 0
    status: "active"
    software:
      primary: "feedparser + httpx"
      dependencies: ["feedparser>=6.0", "httpx>=0.25", "selectolax>=0.3"]
      vendor: null
      requires_api_key: false
    purpose:
      summary: "Scans RSS feeds and news sources for keyword signals"
      what_it_does:
        - "Fetch RSS/Atom feeds"
        - "Extract headlines, summaries, dates"
        - "Score relevance against keywords"
      what_it_does_NOT_do:
        - "Full article scraping (use Firecrawl)"
        - "Sentiment analysis (use SignalClassifier)"
      consumers:
        - "storage-facility-build: PASS0 NewsEvents spoke"
        - "barton-outreach: Blog Content - NewsFeedParser"
    throttle:
      rate_limits:
        - {scope: "per_source", limit: 1, window: "2s"}
        - {scope: "per_day", limit: 1000}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "exponential", initial_delay_ms: 1000, max_retries: 3}
    guardrails:
      kill_switch: {trigger: "error_rate > 50% in 5 minutes", action: "halt_and_alert"}
      data_quality: {min_sources_required: 1, staleness_threshold_hours: 48}
    accuracy: "80%"
    accuracy_notes: "Relevance scoring is heuristic"

  SignalClassifier:
    tool_id: "TOOL-010"
    tier: 0
    status: "active"
    software:
      primary: "Python rules engine"
      dependencies: ["pyyaml>=6.0"]
      vendor: null
      requires_api_key: false
    purpose:
      summary: "Scores and classifies signals for BIT calculation"
      what_it_does:
        - "Ingest signals from multiple sources"
        - "Apply weighted scoring rules"
        - "Calculate composite BIT score"
      consumers:
        - "barton-outreach: Blog Content - BIT modulation"
        - "storage-facility-build: PASS0 MomentumFusion"
    throttle:
      rate_limits:
        - {scope: "per_second", limit: 1000}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "none", max_retries: 1}
    guardrails:
      kill_switch: {trigger: "calculation_error", action: "return_null_score"}
      data_quality: {min_signals_required: 3}
    accuracy: "90%"
    accuracy_notes: "Depends on rule quality and signal freshness"

  PeopleHarvester:
    tool_id: "TOOL-011"
    tier: 0
    status: "active"
    software:
      primary: "httpx + selectolax + playwright"
      fallback: "curl_cffi for anti-bot"
      dependencies: ["httpx>=0.25", "selectolax>=0.3", "playwright>=1.40", "curl_cffi>=0.5"]
      vendor: null
      requires_api_key: false
    purpose:
      summary: "Scrapes executive identity from company websites"
      what_it_does:
        - "Fetch /about, /team, /leadership pages"
        - "Extract name + raw role text"
        - "Detect JS-rendered pages, escalate to playwright"
      what_it_does_NOT_do:
        - "Scrape LinkedIn (ToS violation)"
        - "Make slot assignment decisions"
      consumers:
        - "barton-outreach: People Intelligence - harvester"
    throttle:
      rate_limits:
        - {scope: "per_domain", limit: 1, window: "2s"}
        - {scope: "pages_per_company", limit: 16}
        - {scope: "playwright_per_day", limit: 5000}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "exponential", initial_delay_ms: 2000, max_retries: 2}
    guardrails:
      kill_switch: {trigger: "blocked_rate > 30%", action: "halt_and_review"}
      time_limit: {per_company_seconds: 30}
      data_quality: {early_stop: "4+ people with role keywords"}
    accuracy: "75-85%"
    accuracy_notes: "Depends on website structure consistency"

  MovementDetector:
    tool_id: "TOOL-012"
    tier: 0
    status: "active"
    software:
      primary: "httpx + hashlib + difflib"
      dependencies: ["httpx>=0.25", "xxhash>=3.0"]
      vendor: null
      requires_api_key: false
    purpose:
      summary: "Detects executive role changes via content hashing"
      what_it_does:
        - "Fetch leadership page"
        - "Hash extracted text (not HTML)"
        - "Compare to stored hash"
        - "Flag changes for re-harvest"
      consumers:
        - "barton-outreach: People Intelligence - talent flow"
    throttle:
      rate_limits:
        - {scope: "per_domain", limit: 1, window: "2s"}
        - {scope: "per_month", limit: 100000}
      cost: {model: "free", estimated_cost_per_call: 0.00}
      backoff: {strategy: "exponential", initial_delay_ms: 1000, max_retries: 2}
    guardrails:
      kill_switch: {trigger: "change_rate > 50%", action: "halt_and_review"}
      data_quality: {hash_algorithm: "xxhash64", compare_text_not_html: true}
    accuracy: "90%"
    accuracy_notes: "Detects change, not what changed"

# ═══════════════════════════════════════════════════════════════════════════════
# TIER 1: CHEAP TOOLS (4 tools)
# ═══════════════════════════════════════════════════════════════════════════════

  Firecrawl:
    tool_id: "TOOL-013"
    tier: 1
    status: "active"
    software:
      primary: "Firecrawl API"
      dependencies: ["httpx>=0.25"]
      vendor: "Firecrawl"
      requires_api_key: true
      api_key_source: "FIRECRAWL_API_KEY"
    purpose:
      summary: "Full page scraping with JS rendering and markdown output"
      what_it_does:
        - "Fetch and render JS-heavy pages"
        - "Convert to clean markdown"
        - "Handle anti-bot measures"
      consumers:
        - "storage-facility-build: PASS0 NewsEvents - article scraping"
        - "barton-outreach: Company Target - website intel"
    throttle:
      rate_limits:
        - {scope: "per_minute", limit: 100}
        - {scope: "per_month", limit: 500}
      cost: {model: "freemium", estimated_cost_per_call: 0.00, notes: "500/month free"}
      backoff: {strategy: "exponential", initial_delay_ms: 1000, max_retries: 3}
    guardrails:
      kill_switch: {trigger: "monthly_limit_reached", action: "halt_until_reset"}
    accuracy: "90%"
    accuracy_notes: "Best-in-class for JS rendering"

  ScraperAPI:
    tool_id: "TOOL-014"
    tier: 1
    status: "active"
    software:
      primary: "ScraperAPI"
      dependencies: ["httpx>=0.25"]
      vendor: "ScraperAPI"
      requires_api_key: true
      api_key_source: "SCRAPERAPI_KEY"
    purpose:
      summary: "Anti-bot proxy for difficult targets"
      what_it_does:
        - "Proxy requests through rotating IPs"
        - "Handle CAPTCHAs and blocks"
      consumers:
        - "barton-outreach: MovementDetector - blocked sites"
    throttle:
      rate_limits:
        - {scope: "per_second", limit: 10}
        - {scope: "per_month", limit: 100000}
      cost: {model: "per_call", estimated_cost_per_call: 0.001, monthly_budget_cap: 100}
      backoff: {strategy: "exponential", initial_delay_ms: 2000, max_retries: 3}
    guardrails:
      kill_switch: {trigger: "budget_cap_reached", action: "halt_and_alert"}
    accuracy: "95%"
    accuracy_notes: "High success rate on blocked sites"

  GooglePlaces:
    tool_id: "TOOL-015"
    tier: 1
    status: "active"
    software:
      primary: "Google Places API"
      dependencies: ["httpx>=0.25"]
      vendor: "Google"
      requires_api_key: true
      api_key_source: "GOOGLE_API_KEY"
    purpose:
      summary: "Business validation, address lookup, demand anchor discovery"
      what_it_does:
        - "Text search for business types"
        - "Place details lookup"
        - "Address validation and geocoding"
      consumers:
        - "storage-facility-build: Demand Anchors builder"
        - "barton-outreach: Company Target - address validation"
    throttle:
      rate_limits:
        - {scope: "per_second", limit: 10}
        - {scope: "per_day", limit: 1000}
      cost: {model: "per_call", estimated_cost_per_call: 0.017, monthly_budget_cap: 50}
      backoff: {strategy: "exponential", initial_delay_ms: 1000, max_retries: 3}
    guardrails:
      kill_switch: {trigger: "budget_cap_reached OR daily_limit", action: "halt_and_alert"}
      data_quality: {cache_ttl_days: 30}
    accuracy: "98%"
    accuracy_notes: "Google source of truth for places"

  ComposioRouter:
    tool_id: "TOOL-016"
    tier: 1
    status: "active"
    software:
      primary: "Composio"
      dependencies: []
      vendor: "Composio"
      requires_api_key: true
      api_key_source: "COMPOSIO_API_KEY"
    purpose:
      summary: "Integration router for 500+ apps"
      what_it_does:
        - "Gmail send/read"
        - "Slack notifications"
        - "Google Sheets read/write"
        - "500+ more via single interface"
      consumers:
        - "All repos - integration layer"
    throttle:
      rate_limits:
        - {scope: "per_app_per_minute", limit: 60}
      cost: {model: "monthly_fixed", monthly_cost: 30.00}
      backoff: {strategy: "exponential", initial_delay_ms: 1000, max_retries: 3}
    guardrails:
      kill_switch: {trigger: "auth_failure_sustained", action: "halt_and_alert"}
    accuracy: "95%"
    accuracy_notes: "Depends on downstream app"

# ═══════════════════════════════════════════════════════════════════════════════
# TIER 2: SURGICAL TOOLS (4 tools - Gated)
# ═══════════════════════════════════════════════════════════════════════════════

  HunterEnricher:
    tool_id: "TOOL-017"
    tier: 2
    status: "active"
    software:
      primary: "Hunter.io API"
      dependencies: ["httpx>=0.25"]
      vendor: "Hunter.io"
      requires_api_key: true
      api_key_source: "HUNTER_API_KEY"
    purpose:
      summary: "Email finder and domain search"
      what_it_does:
        - "Find email by name + domain"
        - "Domain email pattern detection"
      consumers:
        - "barton-outreach: Company Target - Tier 1 enrichment"
    gate:
      required_conditions:
        - "lifecycle_state >= ACTIVE"
        - "bit_score >= 25"
      max_attempts_per_context: 1
    throttle:
      rate_limits:
        - {scope: "per_second", limit: 10}
        - {scope: "per_month", limit: 1000}
      cost: {model: "per_call", estimated_cost_per_call: 0.008, monthly_budget_cap: 100}
      backoff: {strategy: "exponential", initial_delay_ms: 1000, max_retries: 2}
    guardrails:
      kill_switch: {trigger: "budget_cap_reached", action: "halt_and_alert"}
      firewall: {check_gate_before_call: true, log_all_calls: true}
    accuracy: "85%"
    accuracy_notes: "Pattern-based, verify before send"

  ApolloEnricher:
    tool_id: "TOOL-018"
    tier: 2
    status: "active"
    software:
      primary: "Apollo.io API"
      dependencies: ["httpx>=0.25"]
      vendor: "Apollo.io"
      requires_api_key: true
      api_key_source: "APOLLO_API_KEY"
    purpose:
      summary: "Contact and company enrichment"
      what_it_does:
        - "People search by company + title"
        - "Email + phone enrichment"
        - "Company firmographics"
      consumers:
        - "barton-outreach: Company Target + People Intelligence"
    gate:
      required_conditions:
        - "lifecycle_state >= ACTIVE"
        - "bit_score >= 25"
      max_attempts_per_context: 1
    throttle:
      rate_limits:
        - {scope: "per_minute", limit: 60}
        - {scope: "per_month", limit: 2000}
      cost: {model: "per_call", estimated_cost_per_call: 0.005, monthly_budget_cap: 100}
      backoff: {strategy: "exponential", initial_delay_ms: 1000, max_retries: 2}
    guardrails:
      kill_switch: {trigger: "budget_cap_reached", action: "halt_and_alert"}
      firewall: {check_gate_before_call: true, log_all_calls: true}
    accuracy: "80%"
    accuracy_notes: "Data freshness varies"

  EmailVerifier:
    tool_id: "TOOL-019"
    tier: 2
    status: "active"
    software:
      primary: "MillionVerifier API"
      dependencies: ["httpx>=0.25"]
      vendor: "MillionVerifier"
      requires_api_key: true
      api_key_source: "MILLIONVERIFIER_API_KEY"
    purpose:
      summary: "Pre-send email verification"
      what_it_does:
        - "Real-time email validation"
        - "Catch-all detection"
        - "Disposable email detection"
      consumers:
        - "barton-outreach: Outreach Execution - pre-send gate"
    gate:
      required_conditions:
        - "lifecycle_state >= TARGETABLE"
        - "email_not_previously_verified"
      max_attempts_per_email: 1
    throttle:
      rate_limits:
        - {scope: "per_second", limit: 50}
        - {scope: "per_month", limit: 10000}
      cost: {model: "per_call", estimated_cost_per_call: 0.004, monthly_budget_cap: 50}
      backoff: {strategy: "linear", initial_delay_ms: 500, max_retries: 2}
    guardrails:
      kill_switch: {trigger: "budget_cap_reached", action: "halt_and_alert"}
      data_quality: {cache_result: true, cache_ttl_days: 90}
    accuracy: "98%"
    accuracy_notes: "Industry-leading accuracy"

  RetellCaller:
    tool_id: "TOOL-020"
    tier: 2
    status: "active"
    software:
      primary: "Retell AI API"
      dependencies: ["httpx>=0.25"]
      vendor: "Retell AI"
      requires_api_key: true
      api_key_source: "RETELL_API_KEY"
    purpose:
      summary: "AI voice calling for outreach and validation"
      what_it_does:
        - "Automated voice calls"
        - "Conversation transcription"
        - "Lead qualification"
      consumers:
        - "storage-facility-build: Facility outreach"
        - "barton-outreach: Voice outreach channel"
    gate:
      required_conditions:
        - "human_approval_required"
        - "campaign_budget_approved"
      max_attempts_per_contact: 3
    throttle:
      rate_limits:
        - {scope: "concurrent_calls", limit: 10}
        - {scope: "per_day", limit: 100}
      cost: {model: "per_minute", estimated_cost_per_minute: 0.07, monthly_budget_cap: 200}
      backoff: {strategy: "fixed", initial_delay_ms: 5000, max_retries: 1}
    guardrails:
      kill_switch: {trigger: "budget_cap_reached OR complaint_received", action: "halt_immediately"}
      compliance: {require_consent: true, respect_dnc: true, calling_hours: "9am-8pm local"}
    accuracy: "90%"
    accuracy_notes: "Depends on script quality"

# ═══════════════════════════════════════════════════════════════════════════════
# BANNED LIST
# ═══════════════════════════════════════════════════════════════════════════════

banned:
  vendors:
    - {name: "ZoomInfo", reason: "Cost prohibitive"}
    - {name: "Lusha", reason: "Cost prohibitive"}
    - {name: "Seamless.AI", reason: "Cost prohibitive"}
    - {name: "LinkedIn Sales Navigator", reason: "ToS violation + cost"}
    - {name: "Diffbot", reason: "Per-page pricing"}
    - {name: "Clearbit", reason: "Now Breeze, pricing changed, use Apollo"}
    - {name: "Clay", reason: "Margin on top of vendors - go direct"}
    - {name: "Prospeo", reason: "Redundant with Hunter"}
    - {name: "Snov", reason: "Redundant with Hunter"}

  libraries:
    - {name: "selenium", reason: "Use playwright instead"}
    - {name: "requests", reason: "Use httpx instead"}
    - {name: "lxml", reason: "Use selectolax instead"}
    - {name: "scrapy", reason: "Overkill - use targeted fetches"}
    - {name: "beautifulsoup4", reason: "Use selectolax (faster)"}

  patterns:
    - {name: "bulk_enrichment", reason: "Violates surgical doctrine"}
    - {name: "llm_as_spine", reason: "LLM is tail arbitration only"}
    - {name: "recursive_crawling", reason: "Cost explosion"}
    - {name: "scraping_linkedin_profiles", reason: "ToS violation"}

# ═══════════════════════════════════════════════════════════════════════════════
# INFRASTRUCTURE (Platform, not tools)
# ═══════════════════════════════════════════════════════════════════════════════

infrastructure:
  ui: {name: "Lovable.dev", role: "UI + Edge Functions", cost: "Subscription"}
  compute: {name: "Supabase Edge Functions", role: "Fast serverless compute", cost: "Free tier"}
  database: {name: "Neon", role: "Vault - source of truth", cost: "Free tier"}
  orchestration: {name: "n8n", role: "Workflow automation", cost: "Self-hosted @ Hostinger"}
  integrations: {name: "Composio", role: "500+ app router", cost: "$30/month fixed"}
  secrets: {name: "Doppler", role: "Secrets management", cost: "Free tier"}
  ci_cd: {name: "GitHub Actions", role: "CI/CD pipelines", cost: "Free tier"}

# ═══════════════════════════════════════════════════════════════════════════════
# CLAUDE CODE INSTRUCTIONS
# ═══════════════════════════════════════════════════════════════════════════════

claude_instructions: |
  BEFORE suggesting ANY tool, library, or vendor:

  1. CHECK BANNED LIST FIRST
     - If banned → STOP, suggest approved alternative

  2. CHECK TIER 0 (FREE) FIRST
     - Can this be done with existing free tools?

  3. CHECK TIER 1 (CHEAP) SECOND
     - Already paying for Composio, Firecrawl free tier, ScraperAPI

  4. CHECK TIER 2 (SURGICAL) LAST
     - Require gate conditions (BIT score, lifecycle state)

  5. IF NOT LISTED → ASK, may need ADR

  WHEN IMPLEMENTING:
  - Always implement throttle from spec
  - Always implement kill switch from spec
  - Respect gate conditions for Tier 2 tools

# ═══════════════════════════════════════════════════════════════════════════════
# MAINTENANCE — QUARTERLY REVIEW
# ═══════════════════════════════════════════════════════════════════════════════

maintenance:
  review_frequency: "quarterly"
  next_review: "2026-Q2"

  quarterly_checklist:
    - id: "M-001"
      check: "Tool inventory matches actual usage"
      action: "Audit repos for tool invocations, remove unused tools"

    - id: "M-002"
      check: "Tier assignments still accurate"
      action: "Review pricing changes, adjust tiers if costs changed"

    - id: "M-003"
      check: "Banned list still valid"
      action: "Review banned vendors for pricing changes or alternatives"

    - id: "M-004"
      check: "Rate limits still appropriate"
      action: "Check actual usage against limits, adjust if needed"

    - id: "M-005"
      check: "API keys rotated"
      action: "Verify all Tier 1/2 API keys rotated per schedule"

    - id: "M-006"
      check: "Kill switches tested"
      action: "Verify all kill switches function correctly"

    - id: "M-007"
      check: "New tools evaluated"
      action: "Review any new tool requests, create ADRs if approved"

  review_output: |
    After quarterly review, update:
    - last_updated field at top of file
    - next_review field in maintenance section
    - Create ADR for any tool additions/removals
    - Log review completion in sovereign audit trail
