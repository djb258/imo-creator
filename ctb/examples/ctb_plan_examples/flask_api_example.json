{
  "repository": "flask-todo-api",
  "description": "Example CTB plan for a Flask TODO API application",
  "actions": [
    {
      "type": "create_md",
      "path": "30000_vision/vision.md",
      "content": "---\naltitude: 30000\npurpose: Repository vision and architecture\nctb_classification: auto-generated\n---\n\n# Flask TODO API - Vision\n\n## Purpose\nSimple RESTful API for task management built with Flask.\n\n## Architecture Principles\n- RESTful API design\n- SQLite database\n- Token-based authentication\n- Modular structure\n\n## Altitude Organization\n- **30k**: Architecture docs, API design\n- **20k**: Database schema, data models\n- **10k**: Business logic, routes, services\n- **5k**: CLI tools, API documentation UI\n",
      "confidence": 1.0
    },
    {
      "type": "create_md",
      "path": "30000_vision/api_design.md",
      "content": "---\naltitude: 30000\npurpose: API design and endpoints\nctb_classification: auto-generated\n---\n\n# API Design\n\n## Endpoints\n\n### Tasks\n- `GET /tasks` - List all tasks\n- `POST /tasks` - Create new task\n- `GET /tasks/{id}` - Get specific task\n- `PUT /tasks/{id}` - Update task\n- `DELETE /tasks/{id}` - Delete task\n\n### Authentication\n- `POST /auth/login` - Get access token\n- `POST /auth/register` - Register new user\n",
      "confidence": 1.0
    },
    {
      "type": "move",
      "from": "schema.sql",
      "to": "20000_category/schema.sql",
      "reason": "Database schema definition - category layer",
      "confidence": 1.0
    },
    {
      "type": "move",
      "from": "models/task.py",
      "to": "20000_category/models/task.py",
      "reason": "Task data model - category layer",
      "confidence": 0.98
    },
    {
      "type": "move",
      "from": "models/user.py",
      "to": "20000_category/models/user.py",
      "reason": "User data model - category layer",
      "confidence": 0.98
    },
    {
      "type": "move",
      "from": "app.py",
      "to": "10000_execution/app.py",
      "reason": "Main Flask application - execution layer",
      "confidence": 1.0
    },
    {
      "type": "move",
      "from": "routes/tasks.py",
      "to": "10000_execution/routes/tasks.py",
      "reason": "Task route handlers - execution layer",
      "confidence": 0.95
    },
    {
      "type": "move",
      "from": "routes/auth.py",
      "to": "10000_execution/routes/auth.py",
      "reason": "Authentication routes - execution layer",
      "confidence": 0.95
    },
    {
      "type": "move",
      "from": "services/task_service.py",
      "to": "10000_execution/services/task_service.py",
      "reason": "Task business logic - execution layer",
      "confidence": 0.92
    },
    {
      "type": "move",
      "from": "utils/validators.py",
      "to": "10000_execution/utils/validators.py",
      "reason": "Validation utilities - execution layer",
      "confidence": 0.85
    },
    {
      "type": "move",
      "from": "cli.py",
      "to": "5000_visibility/cli.py",
      "reason": "CLI interface - visibility layer",
      "confidence": 1.0
    },
    {
      "type": "annotate",
      "file": "10000_execution/app.py",
      "altitude": 10000,
      "purpose": "Main Flask application initialization and configuration",
      "confidence": 1.0
    },
    {
      "type": "annotate",
      "file": "20000_category/models/task.py",
      "altitude": 20000,
      "purpose": "Task data model with SQLAlchemy ORM",
      "confidence": 0.98
    },
    {
      "type": "annotate",
      "file": "20000_category/models/user.py",
      "altitude": 20000,
      "purpose": "User data model with authentication fields",
      "confidence": 0.98
    },
    {
      "type": "annotate",
      "file": "10000_execution/routes/tasks.py",
      "altitude": 10000,
      "purpose": "RESTful endpoints for task CRUD operations",
      "confidence": 0.95
    },
    {
      "type": "annotate",
      "file": "5000_visibility/cli.py",
      "altitude": 5000,
      "purpose": "Command-line interface for API interaction",
      "confidence": 1.0
    }
  ],
  "manifest": {
    "branches": [
      {
        "altitude": 30000,
        "name": "vision",
        "description": "Architecture and API design documentation",
        "files": [
          "30000_vision/vision.md",
          "30000_vision/api_design.md"
        ],
        "file_count": 2
      },
      {
        "altitude": 20000,
        "name": "category",
        "description": "Data models and database schema",
        "files": [
          "20000_category/schema.sql",
          "20000_category/models/task.py",
          "20000_category/models/user.py"
        ],
        "file_count": 3
      },
      {
        "altitude": 10000,
        "name": "execution",
        "description": "Core application logic and routes",
        "files": [
          "10000_execution/app.py",
          "10000_execution/routes/tasks.py",
          "10000_execution/routes/auth.py",
          "10000_execution/services/task_service.py",
          "10000_execution/utils/validators.py"
        ],
        "file_count": 5
      },
      {
        "altitude": 5000,
        "name": "visibility",
        "description": "User-facing interfaces",
        "files": [
          "5000_visibility/cli.py"
        ],
        "file_count": 1
      }
    ],
    "stats": {
      "total_files": 11,
      "by_altitude": {
        "30000": 2,
        "20000": 3,
        "10000": 5,
        "5000": 1
      },
      "total_actions": 15,
      "action_types": {
        "move": 9,
        "create_md": 2,
        "annotate": 5
      }
    },
    "dependencies": {
      "framework": "Flask",
      "database": "SQLite (SQLAlchemy ORM)",
      "authentication": "JWT tokens",
      "python_version": "3.9+"
    }
  },
  "summary": "CTB plan for Flask TODO API - 11 files across 4 altitude levels",
  "confidence_avg": 0.96,
  "confidence_distribution": {
    "high": 9,
    "medium": 2,
    "low": 0
  },
  "generated": "2025-11-06T14:00:00Z",
  "ctb_version": "1.3.2",
  "low_confidence_files": [
    {
      "file": "utils/validators.py",
      "altitude": 10000,
      "confidence": 0.85,
      "reason": "Generic utility file - could potentially be category (20k) if contains data validation schemas"
    }
  ],
  "recommendations": [
    "Review validators.py to determine if it contains data schemas (20k) or business logic (10k)",
    "Consider adding API documentation UI at 5000_visibility/docs/",
    "Add integration tests at 10000_execution/tests/",
    "Create database migration scripts at 20000_category/migrations/"
  ]
}
