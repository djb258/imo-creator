# CTB/DATA - Environment Variables Template
# Database and Data Layer Configuration
# Copy this file to .env and fill in your actual values

# =============================================================================
# PRIMARY DATABASE (Neon PostgreSQL)
# =============================================================================

# Neon Connection
DATABASE_URL=postgresql://user:password@ep-xxxxx-xxxxx.us-east-2.aws.neon.tech/main?sslmode=require
NEON_DATABASE_URL=postgresql://user:password@ep-xxxxx-xxxxx.us-east-2.aws.neon.tech/main?sslmode=require

# Database Name
DB_NAME=main
DB_SCHEMA=public

# Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_POOL_PRE_PING=true

# Connection Retry
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=1

# SSL Configuration
DB_SSL_MODE=require
DB_SSL_CERT_PATH=

# =============================================================================
# TEST DATABASE
# =============================================================================

# Test Database (for running tests)
TEST_DATABASE_URL=postgresql://user:password@localhost:5432/test_db
TEST_DB_NAME=test_db

# =============================================================================
# FIREBASE/FIRESTORE (Workbench)
# =============================================================================

# Firebase Project Settings
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project-id.iam.gserviceaccount.com

# Firebase Private Key (multi-line, use \n for newlines)
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"

# Firebase Database URL
FIREBASE_DATABASE_URL=https://your-project-id.firebaseio.com

# Firebase Emulator (for local development)
FIREBASE_EMULATOR_ENABLED=false
FIRESTORE_EMULATOR_HOST=localhost:8080
FIREBASE_AUTH_EMULATOR_HOST=localhost:9099

# =============================================================================
# BIGQUERY (Analytics - Optional)
# =============================================================================

# BigQuery Project
BIGQUERY_PROJECT_ID=your-bigquery-project-id
BIGQUERY_DATASET=imo_analytics
BIGQUERY_LOCATION=US

# BigQuery Credentials
GOOGLE_APPLICATION_CREDENTIALS=path/to/service-account-key.json

# BigQuery Settings
BIGQUERY_TIMEOUT=60
BIGQUERY_MAX_RESULTS=1000

# =============================================================================
# MIGRATION CONFIGURATION
# =============================================================================

# Migration Settings
MIGRATION_DIR=ctb/data/migrations/neon
MIGRATION_AUTO_RUN=false
MIGRATION_TRACK_TABLE=schema_migrations

# Migration Behavior
MIGRATION_FAIL_ON_ERROR=true
MIGRATION_DRY_RUN=false

# =============================================================================
# SCHEMA VALIDATION
# =============================================================================

# Zod Validation
VALIDATION_ENABLED=true
VALIDATION_STRICT_MODE=true
VALIDATION_COERCE_TYPES=false

# Schema Checks
SCHEMA_VALIDATION_ON_START=true
SCHEMA_CHECK_INTERVAL=3600

# =============================================================================
# DATA PIPELINES
# =============================================================================

# ETL Configuration
ETL_ENABLED=true
ETL_SCHEDULE=daily
ETL_BATCH_SIZE=1000

# Data Processing
DATA_CHUNK_SIZE=100
DATA_MAX_RETRIES=3
DATA_RETRY_DELAY=5

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Backup Settings
BACKUP_ENABLED=false
BACKUP_SCHEDULE=daily
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=s3://your-bucket/backups

# Recovery
RECOVERY_POINT_ENABLED=true
RECOVERY_POINT_INTERVAL=3600

# =============================================================================
# DATA SEEDING
# =============================================================================

# Seed Data
SEED_DATA_ENABLED=false
SEED_DATA_DIR=ctb/data/neon/seeds
SEED_ON_INIT=false

# Test Data
TEST_DATA_ENABLED=false
TEST_DATA_DIR=ctb/data/test_data

# =============================================================================
# QUERY OPTIMIZATION
# =============================================================================

# Query Settings
QUERY_TIMEOUT=30
QUERY_MAX_ROWS=10000
QUERY_SLOW_LOG_THRESHOLD=1000

# Caching
QUERY_CACHE_ENABLED=false
QUERY_CACHE_TTL=300

# =============================================================================
# LOGGING
# =============================================================================

# Data Layer Logging
LOG_LEVEL=info
LOG_SQL_QUERIES=false
LOG_SLOW_QUERIES=true
LOG_MIGRATIONS=true

# Log Files
LOG_FILE=logs/data.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# =============================================================================
# MONITORING & METRICS
# =============================================================================

# Database Monitoring
DB_MONITOR_ENABLED=false
DB_HEALTH_CHECK_INTERVAL=60

# Metrics
METRICS_ENABLED=false
METRICS_EXPORT_INTERVAL=60

# Alerts
ALERT_ON_CONNECTION_FAILURE=true
ALERT_ON_MIGRATION_FAILURE=true

# =============================================================================
# SECURITY
# =============================================================================

# Encryption at Rest
ENCRYPTION_ENABLED=false
ENCRYPTION_KEY=your_32_character_encryption_key_here
ENCRYPTION_ALGORITHM=AES-256-CBC

# Data Masking (for sensitive fields)
DATA_MASKING_ENABLED=false
MASK_PII_DATA=true

# Access Control
READ_ONLY_MODE=false
ALLOW_DDL_OPERATIONS=true
ALLOW_TRUNCATE=false

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Database Features
FEATURE_NEON_ENABLED=true
FEATURE_FIREBASE_ENABLED=true
FEATURE_BIGQUERY_ENABLED=false

# Data Features
FEATURE_MIGRATIONS_ENABLED=true
FEATURE_SEEDING_ENABLED=false
FEATURE_PIPELINES_ENABLED=true

# =============================================================================
# ENVIRONMENT
# =============================================================================

# Environment Settings
NODE_ENV=development
PYTHON_ENV=development
DEBUG=true

# =============================================================================
# NOTES
# =============================================================================

# 1. Copy this file to .env in the same directory
# 2. Fill in actual values for all required variables
# 3. NEVER commit .env to git
# 4. Required: DATABASE_URL (Neon), FIREBASE_PROJECT_ID
# 5. Optional: BIGQUERY_PROJECT_ID (if using analytics)
# 6. Test database is optional but recommended for development
# 7. Use environment-specific files: .env.development, .env.production
